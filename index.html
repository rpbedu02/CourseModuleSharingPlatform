<!DOCTYPE html>
<html lang="en">
<!-- RPBedu, Course Module Sharing Platform Web App, v2025Apr24 -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPBedu - Course Module Sharing Platform</title>
  <style>
    /* Reset and base styles */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      color: #333;
      background-color: #f9fafb;
      line-height: 1.5;
    }

    /* Container */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Header */
    header {
      background-color: white;
      border-bottom: 1px solid #e5e7eb;
      padding: 0.75rem 0;
    }

    .header-content {
      display: flex;
      align-items: center;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: bold;
      color: #2563eb;
    }

    /* Main content */
    main {
      min-height: 100vh;
      padding: 2rem 0;
    }

    h1 {
      font-size: 1.875rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 2rem;
    }

    /* Card styles */
    .card {
      background-color: white;
      border-radius: 0.5rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      height: 100%;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .card:hover {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      padding: 1.25rem 1.25rem 0.75rem;
      border-bottom: 1px solid #f3f4f6;
    }

    /* Collapsible card styles */
    .card-collapsible .card-header {
      cursor: pointer;
      user-select: none;
      padding: 1rem 1.25rem;
      transition: background-color 0.2s;
    }

    .card-collapsible .card-header:hover {
      background-color: #f9fafb;
    }

    .card-collapsible .card-content {
      max-height: 1000px;
      overflow: hidden;
      transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
    }

    .card-collapsible.collapsed .card-content {
      max-height: 0;
      padding-top: 0;
      padding-bottom: 0;
      border-top: none;
    }

    .card-title {
      font-size: 1.125rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card-title-with-icon {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
    }

    .collapse-icon {
      transition: transform 0.3s ease;
    }

    .collapsed .collapse-icon {
      transform: rotate(-180deg);
    }

    .card-content {
      padding: 1.25rem;
      flex-grow: 1;
    }

    .card-footer {
      padding: 1rem 1.25rem;
      border-top: 1px solid #f3f4f6;
    }

    /* Form styles */
    .form-group {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      line-height: 1.5;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      background-color: white;
    }

    .input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    .button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      line-height: 1.5;
      border-radius: 0.375rem;
      border: 1px solid transparent;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s, border-color 0.2s;
    }

    .button-primary {
      background-color: #2563eb;
      color: white;
    }

    .button-primary:hover {
      background-color: #1d4ed8;
    }

    .button-primary:disabled {
      background-color: #93c5fd;
      cursor: not-allowed;
    }

    .button-full {
      width: 100%;
    }

    /* Grid layout */
    .grid {
      display: grid;
      gap: 1.5rem;
    }

    .grid-cols-1 {
      grid-template-columns: repeat(1, 1fr);
    }

    @media (min-width: 640px) {
      .sm\:grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .lg\:grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Flex utilities */
    .flex {
      display: flex;
    }

    .flex-col {
      flex-direction: column;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .gap-2 {
      gap: 0.5rem;
    }

    .gap-4 {
      gap: 1rem;
    }

    .gap-6 {
      gap: 1.5rem;
    }

    /* Spacing */
    .mb-2 {
      margin-bottom: 0.5rem;
    }

    .mb-4 {
      margin-bottom: 1rem;
    }

    .mb-8 {
      margin-bottom: 2rem;
    }

    .mt-2 {
      margin-top: 0.5rem;
    }

    .mt-4 {
      margin-top: 1rem;
    }

    .py-12 {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    .py-3 {
      padding-top: 0.75rem;
      padding-bottom: 0.75rem;
    }

    /* Text utilities */
    .text-center {
      text-align: center;
    }

    .text-sm {
      font-size: 0.875rem;
    }

    .text-xs {
      font-size: 0.75rem;
    }

    .text-xl {
      font-size: 1.25rem;
    }

    .font-medium {
      font-weight: 500;
    }

    .text-gray-400 {
      color: #9ca3af;
    }

    .text-gray-500 {
      color: #6b7280;
    }

    .text-gray-600 {
      color: #4b5563;
    }

    .text-gray-700 {
      color: #374151;
    }

    .text-red-500 {
      color: #ef4444;
    }

    .text-green-600 {
      color: #16a34a;
    }

    /* Badge styles */
    .badge {
      display: inline-flex;
      align-items: center;
      border-radius: 9999px;
      padding: 0.25rem 0.625rem;
      font-size: 0.75rem;
      font-weight: 600;
      background-color: #f3f4f6;
      color: #4b5563;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }

    /* Alert styles */
    .alert {
      position: relative;
      width: 100%;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid #e5e7eb;
    }

    .alert-success {
      background-color: #f0fdf4;
      border-color: #86efac;
      color: #166534;
    }

    .alert-error {
      background-color: #fef2f2;
      border-color: #fecaca;
      color: #b91c1c;
    }

    /* Select styles */
    .select-wrapper {
      position: relative;
    }

    .select {
      appearance: none;
      width: 100%;
      padding: 0.5rem 2rem 0.5rem 0.75rem;
      font-size: 0.875rem;
      line-height: 1.5;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      background-color: white;
      cursor: pointer;
    }

    .select-wrapper::after {
      content: '';
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid #6b7280;
      pointer-events: none;
    }

    /* Search input */
    .search-wrapper {
      position: relative;
    }

    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
    }

    .search-input {
      padding-left: 2.5rem;
    }

    /* Module card specific styles */
    .module-link {
      color: inherit;
      text-decoration: none;
      display: block;
      flex-grow: 1;
    }

    .module-link:hover {
      color: #2563eb;
      text-decoration: underline;
    }

    .module-tags {
      display: flex;
      flex-wrap: wrap;
      margin-top: 0.5rem;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 3rem 0;
      background-color: #f9fafb;
      border-radius: 0.5rem;
      border: 1px dashed #d1d5db;
    }

    /* Icons */
    .icon {
      display: inline-block;
      width: 1em;
      height: 1em;
      stroke-width: 0;
      stroke: currentColor;
      fill: currentColor;
      vertical-align: middle;
    }

    .icon-sm {
      width: 1rem;
      height: 1rem;
    }

    .icon-md {
      width: 1.25rem;
      height: 1.25rem;
    }

    /* Divider */
    .divider {
      width: 100%;
      height: 1px;
      background-color: #e5e7eb;
      margin: 1.5rem 0;
    }

    /* Input group */
    .input-group {
      display: flex;
      align-items: stretch;
    }

    .input-group .input {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      flex-grow: 1;
    }

    .input-group .button {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    /* Loading spinner */
    .spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
      margin-right: 0.5rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Module count badge */
    .module-count {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: #e5e7eb;
      color: #4b5563;
      border-radius: 9999px;
      padding: 0.125rem 0.5rem;
      font-size: 0.75rem;
      font-weight: 600;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">RPBedu</div>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <h1>Course Module Sharing Platform</h1>

      <!-- Import/Export Section (Collapsible) -->
      <div id="import-export-section" class="card card-collapsible mb-8">
        <div class="card-header" id="import-export-header">
          <div class="card-title-with-icon">
            <h2 class="card-title">
              <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Import/Export Modules
              <span id="module-count" class="module-count">0</span>
            </h2>
            <svg class="icon icon-sm collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
          </div>
        </div>
        <div class="card-content">
          <!-- URL Import Section -->
          <div class="mb-4">
            <h3 class="text-sm font-medium mb-2">Import from URL</h3>
            <div class="input-group">
              <input 
                type="url" 
                id="url-import" 
                class="input" 
                placeholder="Enter JSON URL" 
                value="https://raw.githubusercontent.com/rpbedu02/CourseModuleSharingPlatform/refs/heads/main/SampleModules/rpbedu-modules-2025-04-24.json">
              <button id="url-import-btn" class="button button-primary">
                Import
              </button>
            </div>
            <p class="text-xs text-gray-500 mt-2">
              Default URL points to sample modules. You can change it to import from a different source.
            </p>
          </div>

          <div class="divider"></div>

          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <button id="export-btn" class="button button-primary button-full" disabled>
                <svg class="icon icon-sm" style="margin-right: 0.5rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Export Modules (0)
              </button>
              <p class="text-xs text-gray-500 mt-2">No modules to export</p>
            </div>
            <div>
              <input type="file" id="import-file" accept=".json" class="input">
              <label for="import-file" class="text-xs text-gray-500 mt-2 block">
                Select a JSON file to import modules
              </label>
            </div>
          </div>
          <div id="import-alert" class="alert" style="display: none;"></div>
        </div>
      </div>

      <!-- Upload Section (Collapsible) -->
      <div id="upload-section" class="card card-collapsible mb-8">
        <div class="card-header" id="upload-header">
          <div class="card-title-with-icon">
            <h2 class="card-title">
              <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Add/Link Modules
            </h2>
            <svg class="icon icon-sm collapse-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
          </div>
        </div>
        <div class="card-content">
          <div class="grid sm:grid-cols-2 gap-6">
            <!-- Local Upload Form -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">
                  <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                  </svg>
                  Upload Local Module
                </h2>
              </div>
              <div class="card-content">
                <form id="local-upload-form" class="form">
                  <div class="form-group">
                    <label for="local-name">Module Name</label>
                    <input type="text" id="local-name" class="input" placeholder="Introduction to React">
                  </div>

                  <div class="form-group">
                    <label for="local-description">Description</label>
                    <textarea id="local-description" class="input" placeholder="Enter a detailed description for the module..." rows="3"></textarea>
                  </div>

                  <div class="form-group">
                    <label for="local-category">Category</label>
                    <input type="text" id="local-category" class="input" placeholder="Web Development">
                  </div>

                  <div class="form-group">
                    <label for="local-tags">Tags (comma-separated)</label>
                    <input type="text" id="local-tags" class="input" placeholder="react, javascript, frontend">
                  </div>

                  <div class="form-group">
                    <label for="local-file">HTML File</label>
                    <input type="file" id="local-file" class="input" accept=".html">
                    <div id="local-file-selected" class="text-sm text-green-600 mt-2" style="display: none;"></div>
                  </div>

                  <div id="local-error" class="text-sm text-red-500 mb-4" style="display: none;"></div>

                  <button type="submit" class="button button-primary button-full">Upload Module</button>
                </form>
              </div>
            </div>

            <!-- Cloud Upload Form -->
            <div class="card">
              <div class="card-header">
                <h2 class="card-title">
                  <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                  </svg>
                  Add Cloud-Hosted Module
                </h2>
              </div>
              <div class="card-content">
                <form id="cloud-upload-form" class="form">
                  <div class="form-group">
                    <label for="cloud-name">Module Name</label>
                    <input type="text" id="cloud-name" class="input" placeholder="Advanced CSS Techniques">
                  </div>

                  <div class="form-group">
                    <label for="cloud-category">Category</label>
                    <input type="text" id="cloud-category" class="input" placeholder="Web Design">
                  </div>

                  <div class="form-group">
                    <label for="cloud-tags">Tags (comma-separated)</label>
                    <input type="text" id="cloud-tags" class="input" placeholder="css, design, animation">
                  </div>

                  <div class="form-group">
                    <label for="cloud-description">Description</label>
                    <textarea id="cloud-description" class="input" placeholder="Enter a detailed description for the module..." rows="3"></textarea>
                  </div>

                  <div class="form-group">
                    <label for="cloud-url">HTML File URL</label>
                    <input type="url" id="cloud-url" class="input" placeholder="https://example.com/module.html">
                  </div>

                  <div id="cloud-error" class="text-sm text-red-500 mb-4" style="display: none;"></div>

                  <button type="submit" class="button button-primary button-full">Add Module</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Search and Filter Section -->
      <div class="flex flex-col gap-4 mb-8">
        <div class="search-wrapper">
          <svg class="icon icon-sm search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" id="search-input" class="input search-input" placeholder="Search modules...">
        </div>
        <div class="select-wrapper">
          <select id="category-filter" class="select">
            <option value="">All Categories</option>
          </select>
        </div>
        <div class="flex items-center gap-2">
          <input type="checkbox" id="favorites-filter" class="input" style="width: auto; height: auto;">
          <label for="favorites-filter" class="text-sm font-medium text-gray-700">Show Favorites Only</label>
        </div>
        <div class="select-wrapper">
          <label for="rating-filter" class="text-sm font-medium text-gray-700 sr-only">Minimum Rating</label> <!-- sr-only for accessibility if label is visually hidden -->
          <select id="rating-filter" class="select">
            <option value="0">All Ratings</option>
            <option value="1">1 Star & Up</option>
            <option value="2">2 Stars & Up</option>
            <option value="3">3 Stars & Up</option>
            <option value="4">4 Stars & Up</option>
            <option value="5">5 Stars</option>
          </select>
        </div>
        <div class="select-wrapper">
          <label for="sort-by-filter" class="text-sm font-medium text-gray-700 sr-only">Sort by</label>
          <select id="sort-by-filter" class="select">
            <option value="dateAddedDesc">Date Added (Newest First)</option>
            <option value="dateAddedAsc">Date Added (Oldest First)</option>
            <option value="nameAsc">Name (A-Z)</option>
            <option value="nameDesc">Name (Z-A)</option>
            <option value="ratingDesc">Rating (High to Low)</option>
            <option value="ratingAsc">Rating (Low to High)</option>
            <option value="lastAccessedDesc">Last Accessed (Newest First)</option>
            <option value="lastAccessedAsc">Last Accessed (Oldest First)</option>
          </select>
        </div>
      </div>

      <!-- Modules Grid -->
      <div id="modules-container" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Empty state will be shown here initially -->
        <div id="empty-state" class="empty-state" style="grid-column: 1 / -1;">
          <h2 class="text-xl font-medium text-gray-600 mb-2">No modules yet</h2>
          <p class="text-gray-500">Upload your first module using the forms above or import existing modules.</p>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Store modules in memory
    let modules = [];
    let currentPage = 1;
    let itemsPerPage = 9; // 3 rows of 3 cards

    // DOM Elements
    const localUploadForm = document.getElementById('local-upload-form');
    const cloudUploadForm = document.getElementById('cloud-upload-form');
    const modulesContainer = document.getElementById('modules-container');
    const emptyState = document.getElementById('empty-state');
    const searchInput = document.getElementById('search-input');
    const categoryFilter = document.getElementById('category-filter');
    const favoritesFilter = document.getElementById('favorites-filter');
    const ratingFilter = document.getElementById('rating-filter');
    const sortByFilter = document.getElementById('sort-by-filter');
    const exportBtn = document.getElementById('export-btn');
    const importFileInput = document.getElementById('import-file');
    const importAlert = document.getElementById('import-alert');
    const localFileInput = document.getElementById('local-file');
    const localFileSelected = document.getElementById('local-file-selected');
    const urlImportInput = document.getElementById('url-import');
    const urlImportBtn = document.getElementById('url-import-btn');
    const moduleCount = document.getElementById('module-count');
    
    // Collapsible sections
    const importExportSection = document.getElementById('import-export-section');
    const importExportHeader = document.getElementById('import-export-header');
    const uploadSection = document.getElementById('upload-section');
    const uploadHeader = document.getElementById('upload-header');

    // Initialize the application
    function init() {
      // Load modules from localStorage if available
      const savedModules = localStorage.getItem('rpbedu-modules');
      if (savedModules) {
        modules = JSON.parse(savedModules);
        updateModulesDisplay();
      }

      // Set up event listeners
      localUploadForm.addEventListener('submit', handleLocalUpload);
      cloudUploadForm.addEventListener('submit', handleCloudUpload);
      searchInput.addEventListener('input', () => { currentPage = 1; updateModulesDisplay(); });
      categoryFilter.addEventListener('change', () => { currentPage = 1; updateModulesDisplay(); });
      favoritesFilter.addEventListener('change', () => { currentPage = 1; updateModulesDisplay(); });
      ratingFilter.addEventListener('change', () => { currentPage = 1; updateModulesDisplay(); });
      sortByFilter.addEventListener('change', () => { currentPage = 1; updateModulesDisplay(); });
      exportBtn.addEventListener('click', handleExport);
      importFileInput.addEventListener('change', handleImport);
      localFileInput.addEventListener('change', handleLocalFileChange);
      urlImportBtn.addEventListener('click', handleUrlImport);
      
      // Set up collapsible sections
      importExportHeader.addEventListener('click', () => toggleSection(importExportSection));
      uploadHeader.addEventListener('click', () => toggleSection(uploadSection));
      
      // Initialize sections as collapsed if there are modules, expanded if empty
      if (modules.length > 0) {
        toggleSection(importExportSection);
        toggleSection(uploadSection);
      }
      
      // Update module count
      updateModuleCount();
    }
    
    // Toggle section collapse/expand
    function toggleSection(section) {
      section.classList.toggle('collapsed');
    }
    
    // Update module count badge
    function updateModuleCount() {
      moduleCount.textContent = modules.length;
    }

    // Handle URL import
    async function handleUrlImport() {
      const url = urlImportInput.value.trim();
      
      if (!url) {
        showImportAlert('Please enter a valid URL', 'error');
        return;
      }

      // Show loading state
      const originalBtnText = urlImportBtn.innerHTML;
      urlImportBtn.innerHTML = '<span class="spinner"></span>Importing...';
      urlImportBtn.disabled = true;
      
      try {
        // Fetch the JSON from the URL
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }
        
        const importedData = await response.json();
        
        // Process the imported data using the existing validation logic
        const importedCount = processImportedData(importedData);
        
        // Show success message
        showImportAlert(`Successfully imported ${importedCount} modules from URL`, 'success');
      } catch (error) {
        // Show error message
        showImportAlert(`Import failed: ${error.message || 'Invalid URL or data format'}`, 'error');
      } finally {
        // Reset button state
        urlImportBtn.innerHTML = originalBtnText;
        urlImportBtn.disabled = false;
      }
    }

    // Handle local file selection
    function handleLocalFileChange(e) {
      const file = e.target.files[0];
      if (file) {
        if (!file.name.endsWith('.html')) {
          showError('local-error', 'Please upload an HTML file');
          localFileInput.value = '';
          localFileSelected.style.display = 'none';
          return;
        }
        
        localFileSelected.textContent = `File selected: ${file.name}`;
        localFileSelected.style.display = 'block';
        hideError('local-error');
      } else {
        localFileSelected.style.display = 'none';
      }
    }

    // Handle local module upload
    function handleLocalUpload(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('local-name');
      const categoryInput = document.getElementById('local-category');
      const tagsInput = document.getElementById('local-tags');
      const descriptionInput = document.getElementById('local-description');
      const fileInput = document.getElementById('local-file');
      
      const name = nameInput.value.trim();
      const category = categoryInput.value.trim();
      const tagsString = tagsInput.value.trim();
      const description = descriptionInput.value.trim();
      const file = fileInput.files[0];
      
      // Validate inputs
      if (!name) {
        return showError('local-error', 'Module name is required');
      }
      
      if (!category) {
        return showError('local-error', 'Category is required');
      }
      
      if (!file) {
        return showError('local-error', 'Please upload an HTML file');
      }
      
      if (!file.name.endsWith('.html')) {
        return showError('local-error', 'Please upload an HTML file');
      }
      
      // Process tags
      const tags = tagsString
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);
      
      // Create file URL
      const fileUrl = URL.createObjectURL(file);
      
      // Add module
      addModule({
        name,
        category,
        tags,
        description,
        url: fileUrl,
        isLocal: true
      });
      
      // Reset form
      nameInput.value = '';
      categoryInput.value = '';
      tagsInput.value = '';
      descriptionInput.value = '';
      fileInput.value = '';
      localFileSelected.style.display = 'none';
      hideError('local-error');
    }

    // Handle cloud module upload
    function handleCloudUpload(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('cloud-name');
      const categoryInput = document.getElementById('cloud-category');
      const tagsInput = document.getElementById('cloud-tags');
      const descriptionInput = document.getElementById('cloud-description'); // This ID should now be correct
      const urlInput = document.getElementById('cloud-url');
      
      const name = nameInput.value.trim();
      const category = categoryInput.value.trim();
      const tagsString = tagsInput.value.trim();
      const description = descriptionInput.value.trim(); // Ensure this is read
      const url = urlInput.value.trim();
      
      // Validate inputs
      if (!name) {
        return showError('cloud-error', 'Module name is required');
      }
      
      if (!category) {
        return showError('cloud-error', 'Category is required');
      }
      
      if (!url) {
        return showError('cloud-error', 'URL is required');
      }
      
      // Validate URL
      try {
        new URL(url);
      } catch (e) {
        return showError('cloud-error', 'Please enter a valid URL');
      }
      
      // Process tags
      const tags = tagsString
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);
      
      // Add module
      addModule({
        name,
        category,
        tags,
        description, // Ensure this is passed
        url,
        isLocal: false
      });
      
      // Reset form
      nameInput.value = '';
      categoryInput.value = '';
      tagsInput.value = '';
      descriptionInput.value = ''; // Ensure this is cleared
      urlInput.value = '';
      hideError('cloud-error');
    }

    // Add a new module
    function addModule(moduleData) {
      const newModule = {
        ...moduleData,
        description: moduleData.description || '',
        id: Date.now().toString(),
        dateAdded: new Date().toISOString(),
        dateLastAccessed: new Date().toISOString(),
        isFavorite: false, // Added isFavorite
        rating: 0 // Added rating, default 0
      };
      
      modules.push(newModule);
      saveModules();
      updateModulesDisplay();
      updateModuleCount();
    }

    // Save modules to localStorage
    function saveModules() {
      localStorage.setItem('rpbedu-modules', JSON.stringify(modules));
    }

    // Update the modules display
    function updateModulesDisplay() {
      // Update export button
      exportBtn.disabled = modules.length === 0;
      exportBtn.innerHTML = `
        <svg class="icon icon-sm" style="margin-right: 0.5rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Export Modules (${modules.length})
      `;
      
      // Update category filter
      const currentSelection = categoryFilter.value;
      const categories = [...new Set(modules.map(module => module.category))];
      
      // Clear existing options except the first one
      while (categoryFilter.options.length > 1) {
        categoryFilter.remove(1);
      }
      
      // Add category options
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categoryFilter.appendChild(option);
      });
      
      // Restore selection if possible
      if (currentSelection && categories.includes(currentSelection)) {
        categoryFilter.value = currentSelection;
      }
      
      // Filter modules
      const searchTerm = searchInput.value.toLowerCase();
      const selectedCategory = categoryFilter.value;
      const showFavoritesOnly = favoritesFilter.checked;
      const selectedRating = parseInt(ratingFilter.value);
      
      let tempFilteredModules = modules.filter(module => {
        const matchesSearch = module.name.toLowerCase().includes(searchTerm);
        const matchesCategory = selectedCategory ? module.category === selectedCategory : true;
        const matchesFavorite = showFavoritesOnly ? module.isFavorite === true : true;
        const matchesRating = selectedRating > 0 ? module.rating >= selectedRating : true;
        return matchesSearch && matchesCategory && matchesFavorite && matchesRating;
      });

      // Sort modules
      const sortOption = sortByFilter.value;
      switch (sortOption) {
        case 'nameAsc':
          tempFilteredModules.sort((a, b) => a.name.localeCompare(b.name));
          break;
        case 'nameDesc':
          tempFilteredModules.sort((a, b) => b.name.localeCompare(a.name));
          break;
        case 'ratingDesc':
          tempFilteredModules.sort((a, b) => b.rating - a.rating || a.name.localeCompare(b.name));
          break;
        case 'ratingAsc':
          tempFilteredModules.sort((a, b) => a.rating - b.rating || a.name.localeCompare(b.name));
          break;
        case 'dateAddedAsc':
          tempFilteredModules.sort((a, b) => new Date(a.dateAdded) - new Date(b.dateAdded));
          break;
        case 'dateAddedDesc': // Default
          tempFilteredModules.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
          break;
        case 'lastAccessedDesc':
          tempFilteredModules.sort((a, b) => new Date(b.dateLastAccessed) - new Date(a.dateLastAccessed));
          break;
        case 'lastAccessedAsc':
          tempFilteredModules.sort((a, b) => new Date(a.dateLastAccessed) - new Date(b.dateLastAccessed));
          break;
        default: // dateAddedDesc
          tempFilteredModules.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
          break;
      }
      
      const finalFilteredModules = tempFilteredModules;

      // Pagination calculations
      const totalPages = Math.ceil(finalFilteredModules.length / itemsPerPage);
      const startIndex = (currentPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const modulesForCurrentPage = finalFilteredModules.slice(startIndex, endIndex);

      // Clear modules container
      modulesContainer.innerHTML = '';
      
      if (modules.length === 0) { // Check original modules array for the "No modules yet" message
        emptyState.innerHTML = `
          <h2 class="text-xl font-medium text-gray-600 mb-2">No modules yet</h2>
          <p class="text-gray-500">Upload your first module using the forms above or import existing modules.</p>
        `;
        modulesContainer.appendChild(emptyState);
        renderPaginationControls(0, 0); // Clear pagination
        return;
      }
      
      if (finalFilteredModules.length === 0) { // Check filtered list for "No matching modules"
        emptyState.innerHTML = `
          <h2 class="text-xl font-medium text-gray-600 mb-2">No matching modules</h2>
          <p class="text-gray-500">Try adjusting your search or filter criteria.</p>
        `;
        modulesContainer.appendChild(emptyState);
        renderPaginationControls(0, 0); // Clear pagination
        return;
      }
      
      // Hide empty state if it was previously shown but now we have modules
      if (emptyState.parentNode === modulesContainer) {
          emptyState.remove();
      }
      
      // Render modules for the current page
      modulesForCurrentPage.forEach(module => {
        const moduleCard = createModuleCard(module);
        modulesContainer.appendChild(moduleCard);
      });

      renderPaginationControls(totalPages, finalFilteredModules.length);
    }

    // Create a module card element
    function createModuleCard(module) {
      const card = document.createElement('div');
      card.className = 'card';
      card.style.transition = 'transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out';
      
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-5px)';
        card.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
      });
      
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'translateY(0)';
        card.style.boxShadow = '0 1px 3px rgba(0, 0, 0, 0.1)';
      });
      
      // Card header
      const cardHeader = document.createElement('div');
      cardHeader.className = 'card-header';
      
      const cardTitle = document.createElement('div');
      cardTitle.className = 'card-title flex justify-between items-center'; // Main container for title elements
      
      const titleLink = document.createElement('a');
      titleLink.href = module.url;
      titleLink.target = '_blank';
      titleLink.rel = 'noopener noreferrer';
      titleLink.className = 'module-link'; // Takes up available space
      titleLink.textContent = module.name;
      
      titleLink.addEventListener('click', () => {
        const clickedModule = modules.find(m => m.id === module.id);
        if (clickedModule) {
          clickedModule.dateLastAccessed = new Date().toISOString();
          saveModules();
        }
      });

      // Container for title and favorite button, to group them and allow external icon at the very end
      const titleAndFavoriteContainer = document.createElement('div');
      titleAndFavoriteContainer.className = 'flex items-center flex-grow'; // Use flex-grow to push external icon to the right
      titleAndFavoriteContainer.appendChild(titleLink);

      // Favorite Toggle Button
      const favoriteButton = document.createElement('button');
      favoriteButton.className = 'favorite-toggle';
      favoriteButton.title = 'Toggle Favorite';
      favoriteButton.style.background = 'none';
      favoriteButton.style.border = 'none';
      favoriteButton.style.cursor = 'pointer';
      favoriteButton.style.padding = '0.25rem';
      favoriteButton.style.marginLeft = '0.5rem'; // Space from title
      favoriteButton.style.color = '#6b7280'; // Default color for stroke, text-gray-500

      const starSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      starSvg.setAttribute('class', 'icon icon-sm'); // Re-use existing icon class for size
      starSvg.setAttribute('viewBox', '0 0 24 24');
      starSvg.setAttribute('stroke-width', '2');
      starSvg.setAttribute('stroke', 'currentColor'); // Inherit color from button
      
      const starPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      // Single path for star, fill will be toggled
      starPath.setAttribute('d', 'M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.31 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z');
      starSvg.appendChild(starPath);
      favoriteButton.appendChild(starSvg);
      
      function updateStarAppearance() {
        if (module.isFavorite) {
          starSvg.setAttribute('fill', 'gold'); // Filled star
          starSvg.setAttribute('stroke', 'gold');
        } else {
          starSvg.setAttribute('fill', 'none');  // Empty star
          starSvg.setAttribute('stroke', 'currentColor');
        }
      }
      updateStarAppearance(); // Set initial state

      favoriteButton.addEventListener('click', (e) => {
        e.stopPropagation(); // Prevent card click or link navigation
        const targetModule = modules.find(m => m.id === module.id);
        if (targetModule) {
          targetModule.isFavorite = !targetModule.isFavorite;
          module.isFavorite = targetModule.isFavorite; // Sync local module var for immediate UI update
          updateStarAppearance();
          saveModules();
          // updateModulesDisplay(); // Not strictly necessary if only star changes
        }
      });
      
      titleAndFavoriteContainer.appendChild(favoriteButton);
      cardTitle.appendChild(titleAndFavoriteContainer);

      const externalIcon = document.createElement('span');
      externalIcon.style.marginLeft = '0.5rem'; // Add some space if title is very short
      externalIcon.innerHTML = `
        <svg class="icon icon-sm text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      `;
      cardTitle.appendChild(externalIcon);
      cardHeader.appendChild(cardTitle);
      card.appendChild(cardHeader);
      
      // Card content
      const cardContent = document.createElement('div');
      cardContent.className = 'card-content';
      
      // Category
      const categoryDiv = document.createElement('div');
      categoryDiv.className = 'flex items-center gap-2 mb-4';
      categoryDiv.innerHTML = `
        <svg class="icon icon-sm text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
        <span class="text-sm text-gray-700">${module.category}</span>
      `;
      cardContent.appendChild(categoryDiv);
      
      // Tags
      if (module.tags && module.tags.length > 0) {
        const tagsDiv = document.createElement('div');
        tagsDiv.className = 'flex items-start gap-2';
        
        const tagIcon = document.createElement('span');
        tagIcon.innerHTML = `
          <svg class="icon icon-sm text-gray-500" style="margin-top: 2px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
            <line x1="7" y1="7" x2="7.01" y2="7"></line>
          </svg>
        `;
        
        const tagsContainer = document.createElement('div');
        tagsContainer.className = 'module-tags';
        
        module.tags.forEach(tag => {
          const badge = document.createElement('span');
          badge.className = 'badge';
          badge.textContent = tag;
          tagsContainer.appendChild(badge);
        });
        
        tagsDiv.appendChild(tagIcon);
        tagsDiv.appendChild(tagsContainer);
        cardContent.appendChild(tagsDiv);
      }
      
      // Module Description
      if (module.description && module.description.trim() !== '') {
        const descriptionDiv = document.createElement('div');
        descriptionDiv.className = 'module-description text-sm text-gray-600 mt-2';
        descriptionDiv.style.whiteSpace = 'pre-wrap'; // Preserve line breaks
        descriptionDiv.textContent = module.description;
        cardContent.appendChild(descriptionDiv);
      }

      // Rating Stars UI
      const ratingContainer = document.createElement('div');
      ratingContainer.className = 'rating-stars flex items-center gap-1 mt-2'; // Added flex and gap
      
      for (let starValue = 1; starValue <= 5; starValue++) {
        const starButton = document.createElement('button');
        starButton.className = 'rating-star-button';
        starButton.setAttribute('data-value', starValue);
        starButton.title = `Rate ${starValue} star${starValue > 1 ? 's' : ''}`;
        starButton.style.background = 'none';
        starButton.style.border = 'none';
        starButton.style.cursor = 'pointer';
        starButton.style.padding = '0.1rem'; // Small padding
        starButton.style.color = '#6b7280'; // Default color for empty star stroke (text-gray-500)

        const starSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
        starSvg.setAttribute('class', 'icon icon-sm'); // Re-use icon-sm for size consistency
        starSvg.setAttribute('viewBox', '0 0 24 24');
        starSvg.setAttribute('stroke-width', '1.5'); // Adjusted stroke-width
        
        const starPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        starPath.setAttribute('d', 'M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.31 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z');
        starSvg.appendChild(starPath);
        starButton.appendChild(starSvg);

        // Set initial appearance
        if (module.rating >= starValue) {
          starSvg.setAttribute('fill', 'gold');
          starSvg.setAttribute('stroke', 'gold');
        } else {
          starSvg.setAttribute('fill', 'none');
          starSvg.setAttribute('stroke', 'currentColor');
        }
        
        starButton.addEventListener('click', (e) => {
          e.stopPropagation();
          const clickedRating = parseInt(starButton.getAttribute('data-value'));
          const targetModule = modules.find(m => m.id === module.id);

          if (targetModule) {
            if (targetModule.rating === clickedRating) {
              targetModule.rating = 0; // Click same star to unrate
            } else {
              targetModule.rating = clickedRating;
            }
            module.rating = targetModule.rating; // Sync local module var for immediate UI update
            
            // Update all stars in this specific rating container
            const allStarButtons = ratingContainer.querySelectorAll('.rating-star-button svg');
            allStarButtons.forEach((svg, index) => {
              if (targetModule.rating >= (index + 1)) {
                svg.setAttribute('fill', 'gold');
                svg.setAttribute('stroke', 'gold');
              } else {
                svg.setAttribute('fill', 'none');
                svg.setAttribute('stroke', 'currentColor');
              }
            });
            saveModules();
          }
        });
        ratingContainer.appendChild(starButton);
      }
      cardContent.appendChild(ratingContainer);
      
      card.appendChild(cardContent);
      
      // Card footer
      const cardFooter = document.createElement('div');
      cardFooter.className = 'card-footer';
      
      const sourceType = document.createElement('div');
      sourceType.className = 'text-xs text-gray-500';
      sourceType.textContent = module.isLocal ? 'Local HTML File' : 'Cloud-Hosted Module';
      cardFooter.appendChild(sourceType);

      // Display Date Added
      if (module.dateAdded) {
        const dateAddedDiv = document.createElement('div');
        dateAddedDiv.className = 'text-xs text-gray-500 mt-1';
        const dateAddedSpan = document.createElement('span');
        dateAddedSpan.title = module.dateAdded;
        dateAddedSpan.textContent = new Date(module.dateAdded).toLocaleDateString();
        dateAddedDiv.textContent = 'Added: ';
        dateAddedDiv.appendChild(dateAddedSpan);
        cardFooter.appendChild(dateAddedDiv);
      }

      // Display Date Last Accessed
      if (module.dateLastAccessed) {
        const dateAccessedDiv = document.createElement('div');
        dateAccessedDiv.className = 'text-xs text-gray-500';
        const dateAccessedSpan = document.createElement('span');
        dateAccessedSpan.title = module.dateLastAccessed;
        dateAccessedSpan.textContent = new Date(module.dateLastAccessed).toLocaleString();
        dateAccessedDiv.textContent = 'Accessed: ';
        dateAccessedDiv.appendChild(dateAccessedSpan);
        cardFooter.appendChild(dateAccessedDiv);
      }
      
      card.appendChild(cardFooter);
      
      return card;
    }

    // Handle export
    function handleExport() {
      if (modules.length === 0) return;
      
      // Create a JSON blob
      const data = JSON.stringify(modules, null, 2);
      const blob = new Blob([data], { type: 'application/json' });
      
      // Create download link
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `rpbedu-modules-${new Date().toISOString().split('T')[0]}.json`;
      
      // Trigger download
      document.body.appendChild(link);
      link.click();
      
      // Clean up
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    }

    // Process imported data
    function processImportedData(importedData) {
      // Validate imported data
      if (!Array.isArray(importedData)) {
        throw new Error('Imported data is not an array');
      }
      
      // Validate each module
      importedData.forEach((module, index) => {
        if (!module.name || !module.category || !module.url || typeof module.isLocal !== 'boolean') {
          throw new Error(`Module at index ${index} has invalid format`);
        }
        
        // Ensure tags is an array
        if (!Array.isArray(module.tags)) {
          module.tags = [];
        }
        
        // Ensure description is a string, default to empty if not present
        module.description = module.description || '';
        
        // Ensure module has an ID
        if (!module.id) {
          module.id = Date.now().toString() + index;
        }

        // Ensure dateAdded and dateLastAccessed, defaulting if not present
        module.dateAdded = module.dateAdded || new Date().toISOString();
        module.dateLastAccessed = module.dateLastAccessed || module.dateAdded;

        // Ensure isFavorite, defaulting if not present or not boolean
        module.isFavorite = typeof module.isFavorite === 'boolean' ? module.isFavorite : false;

        // Ensure rating, defaulting and validating
        let newRating = 0;
        if (typeof module.rating === 'number') {
          newRating = Math.max(0, Math.min(5, module.rating));
        }
        module.rating = newRating;
      });
      
      // Create a map of existing module IDs to avoid duplicates
      const existingIds = new Set(modules.map(m => m.id));
      
      // Filter out modules that already exist by ID
      const newModules = importedData.filter(m => !existingIds.has(m.id));
      
      // Add new modules
      modules = [...modules, ...newModules];
      saveModules();
      updateModulesDisplay();
      updateModuleCount();
      
      return newModules.length;
    }

    // Handle import from file
    function handleImport(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      // Hide previous alerts
      hideImportAlert();
      
      const reader = new FileReader();
      
      reader.onload = (e) => {
        try {
          const content = e.target.result;
          const importedData = JSON.parse(content);
          
          // Process the imported data
          const importedCount = processImportedData(importedData);
          
          // Show success message
          showImportAlert(`Successfully imported ${importedCount} modules`, 'success');
          
          // Reset file input
          importFileInput.value = '';
        } catch (error) {
          // Show error message
          showImportAlert(`Import failed: ${error.message || 'Invalid file format'}`, 'error');
          
          // Reset file input
          importFileInput.value = '';
        }
      };
      
      reader.onerror = () => {
        // Show error message
        showImportAlert('Error reading file', 'error');
        
        // Reset file input
        importFileInput.value = '';
      };
      
      reader.readAsText(file);
    }

    // Show import alert
    function showImportAlert(message, type) {
      importAlert.className = type === 'error' ? 'alert alert-error' : 'alert alert-success';
      importAlert.textContent = message;
      importAlert.style.display = 'block';
      
      // Auto-hide after 5 seconds
      setTimeout(() => {
        hideImportAlert();
      }, 5000);
    }

    // Hide import alert
    function hideImportAlert() {
      importAlert.style.display = 'none';
    }

    // Show error message
    function showError(elementId, message) {
      const errorElement = document.getElementById(elementId);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    // Hide error message
    function hideError(elementId) {
      const errorElement = document.getElementById(elementId);
      errorElement.style.display = 'none';
    }

    // Initialize the application when the DOM is loaded
    document.addEventListener('DOMContentLoaded', init);

    function renderPaginationControls(totalPages, totalItems) {
      const paginationControls = document.getElementById('pagination-controls');
      paginationControls.innerHTML = ''; // Clear existing controls

      if (totalPages <= 1) {
        return; // No controls needed for 0 or 1 page
      }

      // Previous Button
      const prevButton = document.createElement('button');
      prevButton.textContent = 'Previous';
      prevButton.className = 'button button-primary'; // Basic styling
      prevButton.disabled = currentPage === 1;
      prevButton.addEventListener('click', () => {
        if (currentPage > 1) {
          currentPage--;
          updateModulesDisplay();
        }
      });
      paginationControls.appendChild(prevButton);

      // Page X of Y Span
      const pageInfo = document.createElement('span');
      pageInfo.className = 'text-sm text-gray-700';
      pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
      paginationControls.appendChild(pageInfo);

      // Next Button
      const nextButton = document.createElement('button');
      nextButton.textContent = 'Next';
      nextButton.className = 'button button-primary'; // Basic styling
      nextButton.disabled = currentPage === totalPages;
      nextButton.addEventListener('click', () => {
        if (currentPage < totalPages) {
          currentPage++;
          updateModulesDisplay();
        }
      });
      paginationControls.appendChild(nextButton);
    }
  </script>
</body>
</html>
