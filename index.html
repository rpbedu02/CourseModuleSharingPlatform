<!DOCTYPE html>
<html lang="en">
<!-- RPBedu, Course Module Sharing Platform Web App, v2025Apr22 -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPBedu - Course Module Sharing Platform</title>
  <style>
    /* Reset and base styles */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      color: #333;
      background-color: #f9fafb;
      line-height: 1.5;
    }

    /* Container */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    /* Header */
    header {
      background-color: white;
      border-bottom: 1px solid #e5e7eb;
      padding: 0.75rem 0;
    }

    .header-content {
      display: flex;
      align-items: center;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: bold;
      color: #2563eb;
    }

    /* Main content */
    main {
      min-height: 100vh;
      padding: 2rem 0;
    }

    h1 {
      font-size: 1.875rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 2rem;
    }

    /* Card styles */
    .card {
      background-color: white;
      border-radius: 0.5rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      height: 100%;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      padding: 1.25rem 1.25rem 0.75rem;
      border-bottom: 1px solid #f3f4f6;
    }

    .card-title {
      font-size: 1.125rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .card-content {
      padding: 1.25rem;
      flex-grow: 1;
    }

    .card-footer {
      padding: 1rem 1.25rem;
      border-top: 1px solid #f3f4f6;
    }

    /* Form styles */
    .form-group {
      margin-bottom: 1rem;
    }

    label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      font-size: 0.875rem;
      line-height: 1.5;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      background-color: white;
    }

    .input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.2);
    }

    .button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      line-height: 1.5;
      border-radius: 0.375rem;
      border: 1px solid transparent;
      cursor: pointer;
      transition: background-color 0.2s, color 0.2s, border-color 0.2s;
    }

    .button-primary {
      background-color: #2563eb;
      color: white;
    }

    .button-primary:hover {
      background-color: #1d4ed8;
    }

    .button-primary:disabled {
      background-color: #93c5fd;
      cursor: not-allowed;
    }

    .button-full {
      width: 100%;
    }

    /* Grid layout */
    .grid {
      display: grid;
      gap: 1.5rem;
    }

    .grid-cols-1 {
      grid-template-columns: repeat(1, 1fr);
    }

    @media (min-width: 640px) {
      .sm\:grid-cols-2 {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (min-width: 1024px) {
      .lg\:grid-cols-3 {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Flex utilities */
    .flex {
      display: flex;
    }

    .flex-col {
      flex-direction: column;
    }

    .items-center {
      align-items: center;
    }

    .justify-between {
      justify-content: space-between;
    }

    .gap-2 {
      gap: 0.5rem;
    }

    .gap-4 {
      gap: 1rem;
    }

    .gap-6 {
      gap: 1.5rem;
    }

    /* Spacing */
    .mb-2 {
      margin-bottom: 0.5rem;
    }

    .mb-4 {
      margin-bottom: 1rem;
    }

    .mb-8 {
      margin-bottom: 2rem;
    }

    .mt-2 {
      margin-top: 0.5rem;
    }

    .py-12 {
      padding-top: 3rem;
      padding-bottom: 3rem;
    }

    /* Text utilities */
    .text-center {
      text-align: center;
    }

    .text-sm {
      font-size: 0.875rem;
    }

    .text-xs {
      font-size: 0.75rem;
    }

    .text-xl {
      font-size: 1.25rem;
    }

    .font-medium {
      font-weight: 500;
    }

    .text-gray-400 {
      color: #9ca3af;
    }

    .text-gray-500 {
      color: #6b7280;
    }

    .text-gray-600 {
      color: #4b5563;
    }

    .text-gray-700 {
      color: #374151;
    }

    .text-red-500 {
      color: #ef4444;
    }

    .text-green-600 {
      color: #16a34a;
    }

    /* Badge styles */
    .badge {
      display: inline-flex;
      align-items: center;
      border-radius: 9999px;
      padding: 0.25rem 0.625rem;
      font-size: 0.75rem;
      font-weight: 600;
      background-color: #f3f4f6;
      color: #4b5563;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }

    /* Alert styles */
    .alert {
      position: relative;
      width: 100%;
      border-radius: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid #e5e7eb;
    }

    .alert-success {
      background-color: #f0fdf4;
      border-color: #86efac;
      color: #166534;
    }

    .alert-error {
      background-color: #fef2f2;
      border-color: #fecaca;
      color: #b91c1c;
    }

    /* Select styles */
    .select-wrapper {
      position: relative;
    }

    .select {
      appearance: none;
      width: 100%;
      padding: 0.5rem 2rem 0.5rem 0.75rem;
      font-size: 0.875rem;
      line-height: 1.5;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      background-color: white;
      cursor: pointer;
    }

    .select-wrapper::after {
      content: '';
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-top: 5px solid #6b7280;
      pointer-events: none;
    }

    /* Search input */
    .search-wrapper {
      position: relative;
    }

    .search-icon {
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
    }

    .search-input {
      padding-left: 2.5rem;
    }

    /* Module card specific styles */
    .module-link {
      color: inherit;
      text-decoration: none;
      display: block;
      flex-grow: 1;
    }

    .module-link:hover {
      color: #2563eb;
      text-decoration: underline;
    }

    .module-tags {
      display: flex;
      flex-wrap: wrap;
      margin-top: 0.5rem;
    }

    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 3rem 0;
      background-color: #f9fafb;
      border-radius: 0.5rem;
      border: 1px dashed #d1d5db;
    }

    /* Icons */
    .icon {
      display: inline-block;
      width: 1em;
      height: 1em;
      stroke-width: 0;
      stroke: currentColor;
      fill: currentColor;
      vertical-align: middle;
    }

    .icon-sm {
      width: 1rem;
      height: 1rem;
    }

    .icon-md {
      width: 1.25rem;
      height: 1.25rem;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">RPBedu</div>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <h1>Course Module Sharing Platform</h1>

      <!-- Import/Export Section -->
      <div class="card mb-8">
        <div class="card-header">
          <h2 class="card-title">Import/Export Modules</h2>
        </div>
        <div class="card-content">
          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <button id="export-btn" class="button button-primary button-full" disabled>
                <svg class="icon icon-sm" style="margin-right: 0.5rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Export Modules (0)
              </button>
              <p class="text-xs text-gray-500 mt-2">No modules to export</p>
            </div>
            <div>
              <input type="file" id="import-file" accept=".json" class="input">
              <label for="import-file" class="text-xs text-gray-500 mt-2 block">
                Select a JSON file to import modules
              </label>
            </div>
          </div>
          <div id="import-alert" class="alert" style="display: none;"></div>
        </div>
      </div>

      <!-- Upload Section -->
      <div class="grid sm:grid-cols-2 gap-6 mb-8">
        <!-- Local Upload Form -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Upload Local Module
            </h2>
          </div>
          <div class="card-content">
            <form id="local-upload-form" class="form">
              <div class="form-group">
                <label for="local-name">Module Name</label>
                <input type="text" id="local-name" class="input" placeholder="Introduction to React">
              </div>

              <div class="form-group">
                <label for="local-category">Category</label>
                <input type="text" id="local-category" class="input" placeholder="Web Development">
              </div>

              <div class="form-group">
                <label for="local-tags">Tags (comma-separated)</label>
                <input type="text" id="local-tags" class="input" placeholder="react, javascript, frontend">
              </div>

              <div class="form-group">
                <label for="local-file">HTML File</label>
                <input type="file" id="local-file" class="input" accept=".html">
                <div id="local-file-selected" class="text-sm text-green-600 mt-2" style="display: none;"></div>
              </div>

              <div id="local-error" class="text-sm text-red-500 mb-4" style="display: none;"></div>

              <button type="submit" class="button button-primary button-full">Upload Module</button>
            </form>
          </div>
        </div>

        <!-- Cloud Upload Form -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">
              <svg class="icon icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
              </svg>
              Add Cloud-Hosted Module
            </h2>
          </div>
          <div class="card-content">
            <form id="cloud-upload-form" class="form">
              <div class="form-group">
                <label for="cloud-name">Module Name</label>
                <input type="text" id="cloud-name" class="input" placeholder="Advanced CSS Techniques">
              </div>

              <div class="form-group">
                <label for="cloud-category">Category</label>
                <input type="text" id="cloud-category" class="input" placeholder="Web Design">
              </div>

              <div class="form-group">
                <label for="cloud-tags">Tags (comma-separated)</label>
                <input type="text" id="cloud-tags" class="input" placeholder="css, design, animation">
              </div>

              <div class="form-group">
                <label for="cloud-url">HTML File URL</label>
                <input type="url" id="cloud-url" class="input" placeholder="https://example.com/module.html">
              </div>

              <div id="cloud-error" class="text-sm text-red-500 mb-4" style="display: none;"></div>

              <button type="submit" class="button button-primary button-full">Add Module</button>
            </form>
          </div>
        </div>
      </div>

      <!-- Search and Filter Section -->
      <div class="flex flex-col gap-4 mb-8">
        <div class="search-wrapper">
          <svg class="icon icon-sm search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" id="search-input" class="input search-input" placeholder="Search modules...">
        </div>
        <div class="select-wrapper">
          <select id="category-filter" class="select">
            <option value="">All Categories</option>
          </select>
        </div>
      </div>

      <!-- Modules Grid -->
      <div id="modules-container" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Empty state will be shown here initially -->
        <div id="empty-state" class="empty-state" style="grid-column: 1 / -1;">
          <h2 class="text-xl font-medium text-gray-600 mb-2">No modules yet</h2>
          <p class="text-gray-500">Upload your first module using the forms above or import existing modules.</p>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Store modules in memory
    let modules = [];

    // DOM Elements
    const localUploadForm = document.getElementById('local-upload-form');
    const cloudUploadForm = document.getElementById('cloud-upload-form');
    const modulesContainer = document.getElementById('modules-container');
    const emptyState = document.getElementById('empty-state');
    const searchInput = document.getElementById('search-input');
    const categoryFilter = document.getElementById('category-filter');
    const exportBtn = document.getElementById('export-btn');
    const importFileInput = document.getElementById('import-file');
    const importAlert = document.getElementById('import-alert');
    const localFileInput = document.getElementById('local-file');
    const localFileSelected = document.getElementById('local-file-selected');

    // Initialize the application
    function init() {
      // Load modules from localStorage if available
      const savedModules = localStorage.getItem('rpbedu-modules');
      if (savedModules) {
        modules = JSON.parse(savedModules);
        updateModulesDisplay();
      }

      // Set up event listeners
      localUploadForm.addEventListener('submit', handleLocalUpload);
      cloudUploadForm.addEventListener('submit', handleCloudUpload);
      searchInput.addEventListener('input', updateModulesDisplay);
      categoryFilter.addEventListener('change', updateModulesDisplay);
      exportBtn.addEventListener('click', handleExport);
      importFileInput.addEventListener('change', handleImport);
      localFileInput.addEventListener('change', handleLocalFileChange);
    }

    // Handle local file selection
    function handleLocalFileChange(e) {
      const file = e.target.files[0];
      if (file) {
        if (!file.name.endsWith('.html')) {
          showError('local-error', 'Please upload an HTML file');
          localFileInput.value = '';
          localFileSelected.style.display = 'none';
          return;
        }
        
        localFileSelected.textContent = `File selected: ${file.name}`;
        localFileSelected.style.display = 'block';
        hideError('local-error');
      } else {
        localFileSelected.style.display = 'none';
      }
    }

    // Handle local module upload
    function handleLocalUpload(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('local-name');
      const categoryInput = document.getElementById('local-category');
      const tagsInput = document.getElementById('local-tags');
      const fileInput = document.getElementById('local-file');
      
      const name = nameInput.value.trim();
      const category = categoryInput.value.trim();
      const tagsString = tagsInput.value.trim();
      const file = fileInput.files[0];
      
      // Validate inputs
      if (!name) {
        return showError('local-error', 'Module name is required');
      }
      
      if (!category) {
        return showError('local-error', 'Category is required');
      }
      
      if (!file) {
        return showError('local-error', 'Please upload an HTML file');
      }
      
      if (!file.name.endsWith('.html')) {
        return showError('local-error', 'Please upload an HTML file');
      }
      
      // Process tags
      const tags = tagsString
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);
      
      // Create file URL
      const fileUrl = URL.createObjectURL(file);
      
      // Add module
      addModule({
        name,
        category,
        tags,
        url: fileUrl,
        isLocal: true
      });
      
      // Reset form
      nameInput.value = '';
      categoryInput.value = '';
      tagsInput.value = '';
      fileInput.value = '';
      localFileSelected.style.display = 'none';
      hideError('local-error');
    }

    // Handle cloud module upload
    function handleCloudUpload(e) {
      e.preventDefault();
      
      const nameInput = document.getElementById('cloud-name');
      const categoryInput = document.getElementById('cloud-category');
      const tagsInput = document.getElementById('cloud-tags');
      const urlInput = document.getElementById('cloud-url');
      
      const name = nameInput.value.trim();
      const category = categoryInput.value.trim();
      const tagsString = tagsInput.value.trim();
      const url = urlInput.value.trim();
      
      // Validate inputs
      if (!name) {
        return showError('cloud-error', 'Module name is required');
      }
      
      if (!category) {
        return showError('cloud-error', 'Category is required');
      }
      
      if (!url) {
        return showError('cloud-error', 'URL is required');
      }
      
      // Validate URL
      try {
        new URL(url);
      } catch (e) {
        return showError('cloud-error', 'Please enter a valid URL');
      }
      
      // Process tags
      const tags = tagsString
        .split(',')
        .map(tag => tag.trim())
        .filter(tag => tag.length > 0);
      
      // Add module
      addModule({
        name,
        category,
        tags,
        url,
        isLocal: false
      });
      
      // Reset form
      nameInput.value = '';
      categoryInput.value = '';
      tagsInput.value = '';
      urlInput.value = '';
      hideError('cloud-error');
    }

    // Add a new module
    function addModule(moduleData) {
      const newModule = {
        ...moduleData,
        id: Date.now().toString()
      };
      
      modules.push(newModule);
      saveModules();
      updateModulesDisplay();
    }

    // Save modules to localStorage
    function saveModules() {
      localStorage.setItem('rpbedu-modules', JSON.stringify(modules));
    }

    // Update the modules display
    function updateModulesDisplay() {
      // Update export button
      exportBtn.disabled = modules.length === 0;
      exportBtn.innerHTML = `
        <svg class="icon icon-sm" style="margin-right: 0.5rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        Export Modules (${modules.length})
      `;
      
      // Update category filter
      const currentSelection = categoryFilter.value;
      const categories = [...new Set(modules.map(module => module.category))];
      
      // Clear existing options except the first one
      while (categoryFilter.options.length > 1) {
        categoryFilter.remove(1);
      }
      
      // Add category options
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categoryFilter.appendChild(option);
      });
      
      // Restore selection if possible
      if (currentSelection && categories.includes(currentSelection)) {
        categoryFilter.value = currentSelection;
      }
      
      // Filter modules
      const searchTerm = searchInput.value.toLowerCase();
      const selectedCategory = categoryFilter.value;
      
      const filteredModules = modules.filter(module => {
        const matchesSearch = module.name.toLowerCase().includes(searchTerm);
        const matchesCategory = selectedCategory ? module.category === selectedCategory : true;
        return matchesSearch && matchesCategory;
      });
      
      // Clear modules container
      modulesContainer.innerHTML = '';
      
      // Show empty state if no modules
      if (modules.length === 0) {
        emptyState.innerHTML = `
          <h2 class="text-xl font-medium text-gray-600 mb-2">No modules yet</h2>
          <p class="text-gray-500">Upload your first module using the forms above or import existing modules.</p>
        `;
        modulesContainer.appendChild(emptyState);
        return;
      }
      
      // Show no results message if filtered modules is empty
      if (filteredModules.length === 0) {
        emptyState.innerHTML = `
          <h2 class="text-xl font-medium text-gray-600 mb-2">No matching modules</h2>
          <p class="text-gray-500">Try adjusting your search or filter criteria.</p>
        `;
        modulesContainer.appendChild(emptyState);
        return;
      }
      
      // Hide empty state
      emptyState.remove();
      
      // Render modules
      filteredModules.forEach(module => {
        const moduleCard = createModuleCard(module);
        modulesContainer.appendChild(moduleCard);
      });
    }

    // Create a module card element
    function createModuleCard(module) {
      const card = document.createElement('div');
      card.className = 'card';
      card.style.transition = 'transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out';
      
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-5px)';
        card.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
      });
      
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'translateY(0)';
        card.style.boxShadow = '0 1px 3px rgba(0, 0, 0, 0.1)';
      });
      
      // Card header
      const cardHeader = document.createElement('div');
      cardHeader.className = 'card-header';
      
      const cardTitle = document.createElement('div');
      cardTitle.className = 'card-title flex justify-between items-center';
      
      const titleLink = document.createElement('a');
      titleLink.href = module.url;
      titleLink.target = '_blank';
      titleLink.rel = 'noopener noreferrer';
      titleLink.className = 'module-link';
      titleLink.textContent = module.name;
      
      const externalIcon = document.createElement('span');
      externalIcon.innerHTML = `
        <svg class="icon icon-sm text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      `;
      
      cardTitle.appendChild(titleLink);
      cardTitle.appendChild(externalIcon);
      cardHeader.appendChild(cardTitle);
      card.appendChild(cardHeader);
      
      // Card content
      const cardContent = document.createElement('div');
      cardContent.className = 'card-content';
      
      // Category
      const categoryDiv = document.createElement('div');
      categoryDiv.className = 'flex items-center gap-2 mb-4';
      categoryDiv.innerHTML = `
        <svg class="icon icon-sm text-gray-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
        <span class="text-sm text-gray-700">${module.category}</span>
      `;
      cardContent.appendChild(categoryDiv);
      
      // Tags
      if (module.tags && module.tags.length > 0) {
        const tagsDiv = document.createElement('div');
        tagsDiv.className = 'flex items-start gap-2';
        
        const tagIcon = document.createElement('span');
        tagIcon.innerHTML = `
          <svg class="icon icon-sm text-gray-500" style="margin-top: 2px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
            <line x1="7" y1="7" x2="7.01" y2="7"></line>
          </svg>
        `;
        
        const tagsContainer = document.createElement('div');
        tagsContainer.className = 'module-tags';
        
        module.tags.forEach(tag => {
          const badge = document.createElement('span');
          badge.className = 'badge';
          badge.textContent = tag;
          tagsContainer.appendChild(badge);
        });
        
        tagsDiv.appendChild(tagIcon);
        tagsDiv.appendChild(tagsContainer);
        cardContent.appendChild(tagsDiv);
      }
      
      card.appendChild(cardContent);
      
      // Card footer
      const cardFooter = document.createElement('div');
      cardFooter.className = 'card-footer';
      
      const sourceType = document.createElement('div');
      sourceType.className = 'text-xs text-gray-500';
      sourceType.textContent = module.isLocal ? 'Local HTML File' : 'Cloud-Hosted Module';
      
      cardFooter.appendChild(sourceType);
      card.appendChild(cardFooter);
      
      return card;
    }

    // Handle export
    function handleExport() {
      if (modules.length === 0) return;
      
      // Create a JSON blob
      const data = JSON.stringify(modules, null, 2);
      const blob = new Blob([data], { type: 'application/json' });
      
      // Create download link
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `rpbedu-modules-${new Date().toISOString().split('T')[0]}.json`;
      
      // Trigger download
      document.body.appendChild(link);
      link.click();
      
      // Clean up
      document.body.removeChild(link);
      URL.revokeObjectURL(url);
    }

    // Handle import
    function handleImport(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      // Hide previous alerts
      importAlert.style.display = 'none';
      
      const reader = new FileReader();
      
      reader.onload = (e) => {
        try {
          const content = e.target.result;
          const importedData = JSON.parse(content);
          
          // Validate imported data
          if (!Array.isArray(importedData)) {
            throw new Error('Imported data is not an array');
          }
          
          // Validate each module
          importedData.forEach((module, index) => {
            if (!module.name || !module.category || !module.url || typeof module.isLocal !== 'boolean') {
              throw new Error(`Module at index ${index} has invalid format`);
            }
            
            // Ensure tags is an array
            if (!Array.isArray(module.tags)) {
              module.tags = [];
            }
            
            // Ensure module has an ID
            if (!module.id) {
              module.id = Date.now().toString() + index;
            }
          });
          
          // Create a map of existing module IDs to avoid duplicates
          const existingIds = new Set(modules.map(m => m.id));
          
          // Filter out modules that already exist by ID
          const newModules = importedData.filter(m => !existingIds.has(m.id));
          
          // Add new modules
          modules = [...modules, ...newModules];
          saveModules();
          updateModulesDisplay();
          
          // Show success message
          importAlert.className = 'alert alert-success';
          importAlert.textContent = `Successfully imported ${newModules.length} modules`;
          importAlert.style.display = 'block';
          
          // Reset file input
          e.target.value = '';
        } catch (error) {
          // Show error message
          importAlert.className = 'alert alert-error';
          importAlert.textContent = `Import failed: ${error.message || 'Invalid file format'}`;
          importAlert.style.display = 'block';
          
          // Reset file input
          e.target.value = '';
        }
      };
      
      reader.onerror = () => {
        // Show error message
        importAlert.className = 'alert alert-error';
        importAlert.textContent = 'Error reading file';
        importAlert.style.display = 'block';
        
        // Reset file input
        e.target.value = '';
      };
      
      reader.readAsText(file);
    }

    // Show error message
    function showError(elementId, message) {
      const errorElement = document.getElementById(elementId);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }

    // Hide error message
    function hideError(elementId) {
      const errorElement = document.getElementById(elementId);
      errorElement.style.display = 'none';
    }

    // Initialize the application when the DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>